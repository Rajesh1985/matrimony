
<div class="registration-container">
  <div class="registration-wrapper">
    <!-- Progress indicator -->
    <div class="progress-section">
      <h1 class="registration-title">Complete Your Matrimony Profile</h1>
      <div class="progress-bar">
        <div class="progress-fill" [style.width.%]="((step + 1) / (maxSteps + 1)) * 100"></div>
      </div>
      <p class="progress-text">Step {{ step + 1 }} of {{ maxSteps + 1 }}: {{ getStepTitle() }}</p>
    </div>

    <!-- Form container -->
    <div class="form-container">
      <!-- STEP 0: USER REGISTRATION -->
      <div class="step-content" *ngIf="step === 0">
        <h2 class="step-title">Create Your Account</h2>
        <p class="step-description">Please provide your basic information to get started</p>

        <div class="form-group">
          <label for="country_code">Country Code *</label>
          <select 
            id="country_code" 
            [(ngModel)]="formData.country_code" 
            class="form-control"
            [class.has-error]="hasError('country_code')">
            <option value="">Select Country Code</option>
            <option *ngFor="let cc of countryCodes" [value]="cc.code">
              {{ cc.code }} - {{ cc.country }}
            </option>
          </select>
          <span class="error-message" *ngIf="hasError('country_code')">{{ errors['country_code'] }}</span>
        </div>

        <div class="form-group">
          <label for="name">Full Name *</label>
          <input 
            id="name" 
            type="text" 
            [(ngModel)]="formData.name" 
            placeholder="Enter your full name"
            class="form-control"
            [class.has-error]="hasError('name')">
          <span class="error-message" *ngIf="hasError('name')">{{ errors['name'] }}</span>
        </div>

        <div class="form-group">
          <label for="email">Email *</label>
          <input 
            id="email" 
            type="email" 
            [(ngModel)]="formData.email" 
            placeholder="Enter your email"
            class="form-control"
            [class.has-error]="hasError('email')">
          <span class="error-message" *ngIf="hasError('email')">{{ errors['email'] }}</span>
        </div>

        <div class="form-group">
          <label for="mobile">Mobile Number (10 digits) *</label>
          <input 
            id="mobile" 
            type="text" 
            [(ngModel)]="formData.mobile" 
            placeholder="Enter 10-digit mobile number"
            class="form-control"
            maxlength="10"
            [class.has-error]="hasError('mobile')">
          <span class="error-message" *ngIf="hasError('mobile')">{{ errors['mobile'] }}</span>
        </div>

        <div class="form-group">
          <label for="gender">Gender *</label>
          <select 
            id="gender" 
            [(ngModel)]="formData.gender" 
            class="form-control"
            [class.has-error]="hasError('gender')">
            <option value="">Select Gender</option>
            <option *ngFor="let opt of registrationData.GENDER_OPTIONS" [value]="opt.value">
              {{ opt.label }}
            </option>
          </select>
          <span class="error-message" *ngIf="hasError('gender')">{{ errors['gender'] }}</span>
        </div>

        <div class="form-group">
          <label for="password">Password *</label>
          <input 
            id="password" 
            type="password" 
            [(ngModel)]="formData.password" 
            placeholder="Min 8 chars, 1 uppercase, 1 number, 1 symbol"
            class="form-control"
            [class.has-error]="hasError('password')">
          <span class="error-message" *ngIf="hasError('password')">{{ errors['password'] }}</span>
          <small class="form-hint">Must contain: 8+ characters, 1 uppercase, 1 number, 1 symbol (&#64;$!%*?&)</small>
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirm Password *</label>
          <input 
            id="confirmPassword" 
            type="password" 
            [(ngModel)]="formData.confirmPassword" 
            placeholder="Re-enter password"
            class="form-control"
            [class.has-error]="hasError('confirmPassword')">
          <span class="error-message" *ngIf="hasError('confirmPassword')">{{ errors['confirmPassword'] }}</span>
        </div>
      </div>

      <!-- STEP 1: PROFILE DETAILS -->
      <div class="step-content" *ngIf="step === 1">
        <h2 class="step-title">Personal Details</h2>
        <p class="step-description">Tell us more about yourself</p>

        <div class="form-row">
          <div class="form-group">
            <label for="height_cm">Height (cm) *</label>
            <input 
              id="height_cm" 
              type="number" 
              [(ngModel)]="formData.height_cm" 
              placeholder="Enter height in cm"
              class="form-control"
              [class.has-error]="hasError('height_cm')">
            <span class="error-message" *ngIf="hasError('height_cm')">{{ errors['height_cm'] }}</span>
          </div>

          <div class="form-group">
            <label for="birth_date">Birth Date *</label>
            <input 
              id="birth_date" 
              type="date" 
              [(ngModel)]="formData.birth_date" 
              class="form-control"
              [class.has-error]="hasError('birth_date')">
            <span class="error-message" *ngIf="hasError('birth_date')">{{ errors['birth_date'] }}</span>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="country">Country *</label>
            <select 
              id="country" 
              [(ngModel)]="formData.country" 
              (change)="onCountryChange(formData.country)"
              class="form-control"
              [class.has-error]="hasError('country')">
              <option value="">Select Country</option>
              <option *ngFor="let country of countries" [value]="country">{{ country }}</option>
            </select>
            <span class="error-message" *ngIf="hasError('country')">{{ errors['country'] }}</span>
          </div>

          <div class="form-group">
            <label for="state">State *</label>
            <select 
              id="state" 
              [(ngModel)]="formData.state" 
              (change)="onStateChange(formData.state)"
              class="form-control"
              [class.has-error]="hasError('state')">
              <option value="">Select State</option>
              <option *ngFor="let state of states" [value]="state">{{ state }}</option>
            </select>
            <span class="error-message" *ngIf="hasError('state')">{{ errors['state'] }}</span>
          </div>

          <div class="form-group">
            <label for="city">City *</label>
            <select 
              id="city" 
              [(ngModel)]="formData.city" 
              class="form-control"
              [class.has-error]="hasError('city')">
              <option value="">Select City</option>
              <option *ngFor="let city of cities" [value]="city">{{ city }}</option>
            </select>
            <span class="error-message" *ngIf="hasError('city')">{{ errors['city'] }}</span>
          </div>
        </div>

        <!-- Radio buttons for status fields -->
        <div class="radio-group">
          <label>Physical Status *</label>
          <div class="radio-options">
            <label *ngFor="let opt of registrationData.PHYSICAL_STATUS_OPTIONS" class="radio-label">
              <input 
                type="radio" 
                name="physical_status"
                [(ngModel)]="formData.physical_status" 
                [value]="opt.value"
                class="radio-input">
              <span>{{ opt.label }}</span>
            </label>
          </div>
          <span class="error-message" *ngIf="hasError('physical_status')">{{ errors['physical_status'] }}</span>
        </div>

        <div class="radio-group">
          <label>Marital Status *</label>
          <div class="radio-options">
            <label *ngFor="let opt of registrationData.MARITAL_STATUS_OPTIONS" class="radio-label">
              <input 
                type="radio" 
                name="marital_status"
                [(ngModel)]="formData.marital_status" 
                [value]="opt.value"
                class="radio-input">
              <span>{{ opt.label }}</span>
            </label>
          </div>
          <span class="error-message" *ngIf="hasError('marital_status')">{{ errors['marital_status'] }}</span>
        </div>

        <div class="radio-group">
          <label>Food Preference *</label>
          <div class="radio-options">
            <label *ngFor="let opt of registrationData.FOOD_PREFERENCE_OPTIONS" class="radio-label">
              <input 
                type="radio" 
                name="food_preference"
                [(ngModel)]="formData.food_preference" 
                [value]="opt.value"
                class="radio-input">
              <span>{{ opt.label }}</span>
            </label>
          </div>
          <span class="error-message" *ngIf="hasError('food_preference')">{{ errors['food_preference'] }}</span>
        </div>

        <div class="radio-group">
          <label>Complexion *</label>
          <div class="radio-options">
            <label *ngFor="let opt of registrationData.COMPLEXION_OPTIONS" class="radio-label">
              <input 
                type="radio" 
                name="complexion"
                [(ngModel)]="formData.complexion" 
                [value]="opt.value"
                class="radio-input">
              <span>{{ opt.label }}</span>
            </label>
          </div>
          <span class="error-message" *ngIf="hasError('complexion')">{{ errors['complexion'] }}</span>
        </div>

        <!-- Text fields -->
        <div class="form-group">
          <label for="hobbies">Hobbies (Optional)</label>
          <input 
            id="hobbies" 
            type="text" 
            [(ngModel)]="formData.hobbies" 
            placeholder="e.g., Reading, Sports, Music"
            class="form-control">
        </div>

        <div class="form-group">
          <label for="about_me">About Me (Optional)</label>
          <textarea 
            id="about_me" 
            [(ngModel)]="formData.about_me" 
            placeholder="Tell us about yourself"
            class="form-control"
            rows="3"></textarea>
        </div>

        <div class="form-group">
          <label for="address_line1">Address Line 1 *</label>
          <input 
            id="address_line1" 
            type="text" 
            [(ngModel)]="formData.address_line1" 
            placeholder="Enter street address"
            class="form-control"
            [class.has-error]="hasError('address_line1')">
          <span class="error-message" *ngIf="hasError('address_line1')">{{ errors['address_line1'] }}</span>
        </div>

        <div class="form-group">
          <label for="address_line2">Address Line 2 (Optional)</label>
          <input 
            id="address_line2" 
            type="text" 
            [(ngModel)]="formData.address_line2" 
            placeholder="Enter additional address details"
            class="form-control">
        </div>

        <div class="form-group">
          <label for="postal_code">Postal Code (5-6 digits) *</label>
          <input 
            id="postal_code" 
            type="text" 
            [(ngModel)]="formData.postal_code" 
            placeholder="Enter postal code"
            class="form-control"
            maxlength="6"
            [class.has-error]="hasError('postal_code')">
          <span class="error-message" *ngIf="hasError('postal_code')">{{ errors['postal_code'] }}</span>
        </div>
      </div>

      <!-- STEP 2: FAMILY DETAILS -->
      <div class="step-content" *ngIf="step === 2">
        <h2 class="step-title">Family Background</h2>
        <p class="step-description">Tell us about your family</p>

        <div class="form-row">
          <div class="form-group">
            <label for="family_type">Family Type *</label>
            <select 
              id="family_type" 
              [(ngModel)]="formData.family_type" 
              class="form-control"
              [class.has-error]="hasError('family_type')">
              <option value="">Select Family Type</option>
              <option *ngFor="let opt of registrationData.FAMILY_TYPE_OPTIONS" [value]="opt.value">
                {{ opt.label }}
              </option>
            </select>
            <span class="error-message" *ngIf="hasError('family_type')">{{ errors['family_type'] }}</span>
          </div>

          <div class="form-group">
            <label for="family_status">Family Status *</label>
            <select 
              id="family_status" 
              [(ngModel)]="formData.family_status" 
              class="form-control"
              [class.has-error]="hasError('family_status')">
              <option value="">Select Family Status</option>
              <option *ngFor="let opt of registrationData.FAMILY_STATUS_OPTIONS" [value]="opt.value">
                {{ opt.label }}
              </option>
            </select>
            <span class="error-message" *ngIf="hasError('family_status')">{{ errors['family_status'] }}</span>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="brothers">Number of Brothers *</label>
            <input 
              id="brothers" 
              type="number" 
              [(ngModel)]="formData.brothers" 
              (change)="onBrothersChange()"
              placeholder="0"
              class="form-control"
              min="0"
              [class.has-error]="hasError('brothers')">
            <span class="error-message" *ngIf="hasError('brothers')">{{ errors['brothers'] }}</span>
          </div>

          <div class="form-group">
            <label for="sisters">Number of Sisters *</label>
            <input 
              id="sisters" 
              type="number" 
              [(ngModel)]="formData.sisters" 
              (change)="onSistersChange()"
              placeholder="0"
              class="form-control"
              min="0"
              [class.has-error]="hasError('sisters')">
            <span class="error-message" *ngIf="hasError('sisters')">{{ errors['sisters'] }}</span>
          </div>
        </div>

        <!-- Married brothers checkboxes -->
        <div *ngIf="brothersArray.length > 0" class="checkbox-group">
          <label>Married Brothers</label>
          <div class="checkbox-options">
            <label *ngFor="let i of brothersArray" class="checkbox-label">
              <input 
                type="checkbox" 
                [ngModel]="formData.married_brothers[i]"
                (change)="formData.married_brothers[i] = ($any($event.target)).checked"
                class="checkbox-input">
              <span></span>
            </label>
          </div>
        </div>

        <!-- Married sisters checkboxes -->
        <div *ngIf="sistersArray.length > 0" class="checkbox-group">
          <label>Married Sisters</label>
          <div class="checkbox-options">
            <label *ngFor="let i of sistersArray" class="checkbox-label">
              <input 
                type="checkbox" 
                [ngModel]="formData.married_sisters[i]"
                (change)="formData.married_sisters[i] = ($any($event.target)).checked"
                class="checkbox-input">
              <span></span>
            </label>
          </div>
        </div>

        <div class="form-group">
          <label for="father_name">Father's Name</label>
          <input 
            id="father_name" 
            type="text" 
            [(ngModel)]="formData.father_name" 
            placeholder="Enter father's name"
            class="form-control">
        </div>

        <div class="form-group">
          <label for="father_occupation">Father's Occupation (Optional)</label>
          <input 
            id="father_occupation" 
            type="text" 
            [(ngModel)]="formData.father_occupation" 
            placeholder="Enter father's occupation"
            class="form-control">
        </div>

        <div class="form-group">
          <label for="mother_name">Mother's Name</label>
          <input 
            id="mother_name" 
            type="text" 
            [(ngModel)]="formData.mother_name" 
            placeholder="Enter mother's name"
            class="form-control">
        </div>
        
        <div class="form-group">
          <label for="mother_occupation">Mother's Occupation (Optional)</label>
          <input 
            id="mother_occupation" 
            type="text" 
            [(ngModel)]="formData.mother_occupation" 
            placeholder="Enter mother's occupation"
            class="form-control">
        </div>

        <div class="form-group">
          <label for="family_description">Family Description (Optional)</label>
          <textarea 
            id="family_description" 
            [(ngModel)]="formData.family_description" 
            placeholder="Tell us about your family"
            class="form-control"
            rows="3"></textarea>
        </div>

        <!-- PHOTO UPLOAD SECTION -->
        <div class="photo-upload-section">
          <h3 class="photo-section-title">Add Your Photos (Up to {{ maxPhotos }})</h3>
          <p class="photo-section-description">Upload clear, recent photos to increase your profile visibility</p>

          <!-- File Input -->
          <div class="form-group">
            <label for="photo_input" class="file-input-label">
              <span class="file-input-icon">üì∑</span>
              <span class="file-input-text">
                {{ queuedFiles.length > 0 ? 
                  queuedFiles.length + ' file(s) selected' : 
                  'Click to select up to ' + (maxPhotos - photos.length - queuedFiles.length) + ' photo(s)' }}
              </span>
            </label>
            <input 
              id="photo_input"
              type="file" 
              multiple 
              accept="image/*"
              (change)="handlePhotoSelection($event)"
              class="file-input"
              [disabled]="photos.length + queuedFiles.length >= maxPhotos">
            <small class="form-hint">Formats: JPG, PNG, GIF (Max 2 files)</small>
          </div>

          <!-- Error Message -->
          <div *ngIf="photoUploadError" class="error-message photo-error">
            ‚ö†Ô∏è {{ photoUploadError }}
          </div>

          <!-- Upload Progress -->
          <div *ngIf="isUploadingPhotos" class="upload-progress">
            <div class="spinner"></div>
            <span class="progress-text">Uploading photos‚Ä¶ please wait</span>
          </div>

          <!-- Uploaded Photos Grid -->
          <div *ngIf="photos.length > 0" class="photos-grid">
            <h4 class="grid-title">{{ photos.length }} Photo(s) Uploaded</h4>
            <div class="grid-container">
              <div *ngFor="let photo of photos" class="photo-card">
                <img 
                  [src]="getThumbnailUrl(photo.thumbnail_url)" 
                  [alt]="'Photo ' + (photos.indexOf(photo) + 1)"
                  class="photo-thumbnail"
                  onerror="this.src='assets/images/placeholder.png'">
                <button 
                  type="button"
                  (click)="deletePhoto(photo.file_id)"
                  class="delete-button"
                  title="Delete photo">
                  ‚úï
                </button>
              </div>
            </div>
          </div>

          <!-- Queued Files Preview -->
          <div *ngIf="queuedFiles.length > 0" class="queued-files">
            <p class="queued-label">{{ queuedFiles.length }} file(s) selected (will be uploaded after saving)</p>
            <ul class="queued-list">
              <li *ngFor="let file of queuedFiles" class="queued-item">
                <span class="file-icon">üìÑ</span>
                <span class="file-name">{{ file.name }}</span>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- STEP 3: ASTROLOGY DETAILS -->
      <div class="step-content" *ngIf="step === 3">
        <h2 class="step-title">Astrological Details</h2>
        <p class="step-description">Share your astrological information</p>

        <div class="form-row">
          <div class="form-group">
            <label for="star">Star/Nakshatra *</label>
            <select 
              id="star" 
              [(ngModel)]="formData.star" 
              class="form-control"
              [class.has-error]="hasError('star')">
              <option value="">Select Star</option>
              <option *ngFor="let opt of registrationData.STAR_OPTIONS" [value]="opt.value">
                {{ opt.label }}
              </option>
            </select>
            <span class="error-message" *ngIf="hasError('star')">{{ errors['star'] }}</span>
          </div>

          <div class="form-group">
            <label for="rasi">Rasi/Zodiac *</label>
            <select 
              id="rasi" 
              [(ngModel)]="formData.rasi" 
              class="form-control"
              [class.has-error]="hasError('rasi')">
              <option value="">Select Rasi</option>
              <option *ngFor="let opt of registrationData.RASI_OPTIONS" [value]="opt.value">
                {{ opt.label }}
              </option>
            </select>
            <span class="error-message" *ngIf="hasError('rasi')">{{ errors['rasi'] }}</span>
          </div>

          <div class="form-group">
            <label for="kotturam">Kotturam *</label>
            <select 
              id="kotturam" 
              [(ngModel)]="formData.kotturam" 
              class="form-control"
              disabled>
              <option *ngFor="let opt of registrationData.KOTTURAM_OPTIONS" [value]="opt.value">
                {{ opt.label }}
              </option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="lagnam">Lagnam *</label>
          <input 
            id="lagnam" 
            type="text" 
            [(ngModel)]="formData.lagnam" 
            placeholder="Enter lagnam"
            class="form-control"
            [class.has-error]="hasError('lagnam')">
          <span class="error-message" *ngIf="hasError('lagnam')">{{ errors['lagnam'] }}</span>
        </div>

        <div class="form-group">
          <label for="birth_place">Birth Place *</label>
          <input 
            id="birth_place" 
            type="text" 
            [(ngModel)]="formData.birth_place" 
            placeholder="Enter birth place"
            class="form-control"
            [class.has-error]="hasError('birth_place')">
          <span class="error-message" *ngIf="hasError('birth_place')">{{ errors['birth_place'] }}</span>
        </div>

        <div class="form-group">
          <label for="dosham_details">Dosham Details (Optional)</label>
          <textarea 
            id="dosham_details" 
            [(ngModel)]="formData.dosham_details" 
            placeholder="Describe any dosham"
            class="form-control"
            rows="3"></textarea>
        </div>
      </div>

      <!-- STEP 4: PROFESSIONAL DETAILS -->
      <div class="step-content" *ngIf="step === 4">
        <h2 class="step-title">Professional Information</h2>
        <p class="step-description">Tell us about your career and education</p>

        <div class="form-row">
          <div class="form-group">
            <label for="education">Education *</label>
            <select 
              id="education" 
              [(ngModel)]="formData.education" 
              class="form-control"
              [class.has-error]="hasError('education')">
              <option value="">Select Education</option>
              <option *ngFor="let opt of registrationData.EDUCATION_OPTIONS" [value]="opt.value">
                {{ opt.label }}
              </option>
            </select>
            <span class="error-message" *ngIf="hasError('education')">{{ errors['education'] }}</span>
          </div>

          <div class="form-group" *ngIf="formData.education === 'Others'">
            <label for="education_optional">Specify Education *</label>
            <input 
              id="education_optional" 
              type="text" 
              [(ngModel)]="formData.education_optional" 
              placeholder="Please specify your education"
              class="form-control"
              [class.has-error]="hasError('education_optional')">
            <span class="error-message" *ngIf="hasError('education_optional')">{{ errors['education_optional'] }}</span>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="employment_type">Employment Type *</label>
            <select 
              id="employment_type" 
              [(ngModel)]="formData.employment_type" 
              class="form-control"
              [class.has-error]="hasError('employment_type')">
              <option value="">Select Employment Type</option>
              <option *ngFor="let opt of registrationData.EMPLOYMENT_TYPE_OPTIONS" [value]="opt.value">
                {{ opt.label }}
              </option>
            </select>
            <span class="error-message" *ngIf="hasError('employment_type')">{{ errors['employment_type'] }}</span>
          </div>

          <div class="form-group">
            <label for="occupation">Occupation *</label>
            <input 
              id="occupation" 
              type="text" 
              [(ngModel)]="formData.occupation" 
              placeholder="Enter your occupation"
              class="form-control"
              [class.has-error]="hasError('occupation')">
            <span class="error-message" *ngIf="hasError('occupation')">{{ errors['occupation'] }}</span>
          </div>
        </div>

        <div class="form-group">
          <label for="company_name">Company/Organization *</label>
          <input 
            id="company_name" 
            type="text" 
            [(ngModel)]="formData.company_name" 
            placeholder="Enter company name"
            class="form-control"
            [class.has-error]="hasError('company_name')">
          <span class="error-message" *ngIf="hasError('company_name')">{{ errors['company_name'] }}</span>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="annual_income">Annual Income *</label>
            <select 
              id="annual_income" 
              [(ngModel)]="formData.annual_income" 
              class="form-control"
              [class.has-error]="hasError('annual_income')">
              <option value="">Select Income Range</option>
              <option *ngFor="let opt of registrationData.ANNUAL_INCOME_OPTIONS" [value]="opt.value">
                {{ opt.label }}
              </option>
            </select>
            <span class="error-message" *ngIf="hasError('annual_income')">{{ errors['annual_income'] }}</span>
          </div>

          <div class="form-group">
            <label for="work_location">Work Location *</label>
            <input 
              id="work_location" 
              type="text" 
              [(ngModel)]="formData.work_location" 
              placeholder="Enter work city/country"
              class="form-control"
              [class.has-error]="hasError('work_location')">
            <span class="error-message" *ngIf="hasError('work_location')">{{ errors['work_location'] }}</span>
          </div>
        </div>
      </div>

      <!-- STEP 5: PARTNER PREFERENCES -->
      <div class="step-content" *ngIf="step === 5">
        <h2 class="step-title">Partner Preferences</h2>
        <p class="step-description">Specify what you're looking for in a partner</p>

        <div class="form-row">
          <div class="form-group">
            <label for="age_from">Age From *</label>
            <input 
              id="age_from" 
              type="number" 
              [(ngModel)]="formData.age_from" 
              placeholder="18"
              class="form-control"
              min="18"
              max="100"
              [class.has-error]="hasError('age_from')">
            <span class="error-message" *ngIf="hasError('age_from')">{{ errors['age_from'] }}</span>
          </div>

          <div class="form-group">
            <label for="age_to">Age To *</label>
            <input 
              id="age_to" 
              type="number" 
              [(ngModel)]="formData.age_to" 
              placeholder="35"
              class="form-control"
              min="18"
              max="100"
              [class.has-error]="hasError('age_to')">
            <span class="error-message" *ngIf="hasError('age_to')">{{ errors['age_to'] }}</span>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="height_from">Height From (cm) *</label>
            <input 
              id="height_from" 
              type="number" 
              [(ngModel)]="formData.height_from" 
              placeholder="150"
              class="form-control"
              min="100"
              max="250"
              [class.has-error]="hasError('height_from')">
            <span class="error-message" *ngIf="hasError('height_from')">{{ errors['height_from'] }}</span>
          </div>

          <div class="form-group">
            <label for="height_to">Height To (cm) *</label>
            <input 
              id="height_to" 
              type="number" 
              [(ngModel)]="formData.height_to" 
              placeholder="180"
              class="form-control"
              min="100"
              max="250"
              [class.has-error]="hasError('height_to')">
            <span class="error-message" *ngIf="hasError('height_to')">{{ errors['height_to'] }}</span>
          </div>
        </div>

        <!-- Multi-select dropdowns -->
        <div class="form-group">
          <label for="education_preference">Education Preference *</label>
          <app-multi-select-dropdown
            [options]="educationOptions"
            [selectedValues]="formData.education_preference"
            placeholder="Select education preferences"
            [showSelectAll]="true"
            (selectionChanged)="onEducationPreferenceChanged($event)">
          </app-multi-select-dropdown>
          <span class="error-message" *ngIf="hasError('education_preference')">{{ errors['education_preference'] }}</span>
        </div>

        <div class="form-group">
          <label for="occupation_preference">Occupation Preference *</label>
          <app-multi-select-dropdown
            [options]="occupationOptions"
            [selectedValues]="formData.occupation_preference"
            placeholder="Select occupation preferences"
            [showSelectAll]="true"
            (selectionChanged)="onOccupationPreferenceChanged($event)">
          </app-multi-select-dropdown>
          <span class="error-message" *ngIf="hasError('occupation_preference')">{{ errors['occupation_preference'] }}</span>
        </div>

        <div class="form-group">
          <label for="income_preference">Income Preference *</label>
          <app-multi-select-dropdown
            [options]="incomeOptions"
            [selectedValues]="formData.income_preference"
            placeholder="Select income preferences"
            [showSelectAll]="true"
            (selectionChanged)="onIncomePreferenceChanged($event)">
          </app-multi-select-dropdown>
          <span class="error-message" *ngIf="hasError('income_preference')">{{ errors['income_preference'] }}</span>
        </div>

        <div class="form-group">
          <label for="location_preference">Location Preference *</label>
          <app-multi-select-dropdown
            [options]="locationOptions"
            [selectedValues]="formData.location_preference"
            placeholder="Select location preferences"
            [showSelectAll]="false"
            (selectionChanged)="onLocationPreferenceChanged($event)">
          </app-multi-select-dropdown>
          <span class="error-message" *ngIf="hasError('location_preference')">{{ errors['location_preference'] }}</span>
        </div>

        <div class="form-group">
          <label for="star_preference">Star Preference *</label>
          <app-multi-select-dropdown
            [options]="starOptions"
            [selectedValues]="formData.star_preference"
            placeholder="Select star preferences"
            [showSelectAll]="false"
            (selectionChanged)="onStarPreferenceChanged($event)">
          </app-multi-select-dropdown>
          <span class="error-message" *ngIf="hasError('star_preference')">{{ errors['star_preference'] }}</span>
        </div>

        <div class="form-group">
          <label for="rasi_preference">Rasi Preference *</label>
          <app-multi-select-dropdown
            [options]="rasiOptions"
            [selectedValues]="formData.rasi_preference"
            placeholder="Select rasi preferences"
            [showSelectAll]="false"
            (selectionChanged)="onRasiPreferenceChanged($event)">
          </app-multi-select-dropdown>
          <span class="error-message" *ngIf="hasError('rasi_preference')">{{ errors['rasi_preference'] }}</span>
        </div>
      </div>

      <!-- STEP 6: VERIFICATION & COMPLETION -->
      <div class="step-content" *ngIf="step === 6">
        <h2 class="step-title">Verification & Completion</h2>
        <p class="step-description">Review your information</p>

        <div class="verification-box">
          <h3>Registration Summary</h3>
          <div class="summary-item">
            <strong>Name:</strong> {{ formData.name }}
          </div>
          <div class="summary-item">
            <strong>Email:</strong> {{ formData.email }}
          </div>
          <div class="summary-item">
            <strong>Mobile:</strong> {{ formData.country_code }} {{ formData.mobile }}
          </div>
          <div class="summary-item">
            <strong>Gender:</strong> {{ formData.gender }}
          </div>
          <div class="summary-item">
            <strong>Location:</strong> {{ formData.city }}, {{ formData.state }}, {{ formData.country }}
          </div>
          <div class="summary-item">
            <strong>Occupation:</strong> {{ formData.occupation || 'Not specified' }}
          </div>
          <div class="summary-item">
            <strong>Looking for Age:</strong> {{ formData.age_from }} - {{ formData.age_to }}
          </div>
          <div class="summary-item">
            <strong>Profile ID:</strong> {{ formData.profile_id }}
          </div>
        </div>

        <div class="completion-message">
          <p>‚úì All your details have been saved successfully!</p>
          <p>Your matrimony profile is now ready. Click the button below to complete registration.</p>
        </div>
      </div>
    </div>

    <!-- Navigation buttons -->
    <div class="button-group">
      <button 
        (click)="prevStep()" 
        class="btn btn-secondary"
        *ngIf="step > 0">
        ‚Üê Previous
      </button>

      <button 
        (click)="nextStep()" 
        class="btn btn-primary">
        {{ step === 6 ? 'Complete Registration' : 'Next ‚Üí' }}
      </button>
    </div>
  </div>
</div>
